---
title:  '[ê°•ì˜] 4ì£¼ì°¨ ì›¹ í•´í‚¹- ì›¹ í•´í‚¹ ê¸°ìˆ  íƒìƒ‰ 3'
excerpt: "week4"

categories:
  - study
  - etc
  - hacking
tags: [study, etc, virtualbox, kalilinux, hacking]

last_modified_at: 2021-07-17T08:06:00-05:00
classes: wide
---

### 8ì£¼ê°„ì˜ í•´í‚¹ ìŠ¤í„°ë”” ë„¤ë²ˆì§¸ ì‹œê°„

ì´ë²ˆ ì‹œê°„ì—ëŠ” ì•…ì„± íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ì‹œìŠ¤í…œ ëª…ë ¹ì„ ê³µê²©í•˜ëŠ” ê¸°ìˆ ì¸ **íŒŒì¼ ì—…ë¡œë“œ ê³µê²©**ì— ëŒ€í•´ í•™ìŠµí•˜ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤~! ğŸ˜‰

ê°•ì˜ë¥¼ ë“£ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸°ë¡œ gogo~! => [goormedu](https://edu.goorm.io/lecture/4953/í™”ì´íŠ¸í•´ì»¤ê°€-ë˜ê¸°-ìœ„í•œ-8ê°€ì§€-ì›¹-í•´í‚¹-ê¸°ìˆ )


### íŒŒì¼ì—…ë¡œë“œ ê³µê²©

íŒŒì¼ì´ ì—…ë¡œë“œë˜ëŠ” í˜ì´ì§€(ê²Œì‹œíŒ, SNS)ì— ì•…ì„±íŒŒì¼(ì›¹ì…€)ì„ ì—…ë¡œë“œ

ì£¼ë¡œ **`ì›¹ì…€`**ì´ë¼ëŠ” ì•…ì„±íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ”ë°, ì›¹ì…€ì´ë€, ì›¹ì„ í†µí•´ ì‹œìŠ¤í…œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì›¹í˜ì´ì§€ì´ë‹¤.

ë‹¤ìŒê·¸ë¦¼ì„ ë³´ë©´ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ëŠ” í˜ì´ì§€ê°€ ìˆê³  í—¤ì»¤ëŠ” ì´ë¯¸ì§€ ëŒ€ì‹  ì›¹ì…€ì„ ì—…ë¡œë“œí•œë‹¤. ë§Œì•½ ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ë¥¼ ì œëŒ€ë¡œí™•ì¸í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì›¹ì‰˜ì„ ì €ì¥í•˜ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/53431568/125901242-6899830b-1df5-49da-8742-dc9677636a88.png)

<br>
  
ë‹¤ìŒìœ¼ë¡œ í•´ì»¤ê°€ ì›¹ì…€ì— ì ‘ê·¼í•˜ê²Œ ë˜ë©´ ì›¹ì…€ì´ ì‹¤í–‰ë˜ê³  í•´ì»¤ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ ì‹œìŠ¤í…œ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ëœë‹¤.

![image](https://user-images.githubusercontent.com/53431568/125900890-60788a52-acb8-4644-a007-84d953fb5bac.png)


ì´ì œ ì¬ë¯¸ìˆëŠ” ì‹¤ìŠµì˜ ì‹œê°„ì´ë‹¤ ã…ã…

### íŒŒì¼ì—…ë¡œë“œ ê³µê²© ì‹¤ìŠµ

ë¨¼ì € ì›¹ì…€ íŒŒì¼ì„ ì—…ë¡œë“œí•´ë³´ê¸° ìœ„í•´ ê°•ì‚¬ë‹˜ì˜ ê¹ƒí—™ì— ì˜¬ë¼ì™€ìˆëŠ” webshell.phpë¥¼ `/root`  ë””ë ‰í† ë¦¬ì— wgetìœ¼ë¡œ ë‹¤ìš´ë°›ì•˜ë‹¤

geditìœ¼ë¡œ ì›¹ì…€ì½”ë“œë¥¼ ì‚´í´ë³´ë©´.. ì‚¬ìš©ìê°€ ì…ë ¥í•œê±¸ ì‹œìŠ¤í…œ ëª…ë ¹ì–´ë¡œ ì‹¤í–‰ë˜ê²Œ í•˜ëŠ” ì½”ë“œê°€ ì§œì ¸ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/125961030-c99dbfa7-aaca-4ffb-84f4-997e293945ec.png)

<br>

### (1) LOW ë‹¨ê³„

File upload ë©”ë‰´ì— ë“¤ì–´ê°€ì„œ `Browse...` ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒê³¼ ê°™ì´ Webshell.php íŒŒì¼ì„ ì—…ë¡œë“œ í•œë‹¤.

![image](https://user-images.githubusercontent.com/53431568/125961167-d66cc175-4c34-4054-9d50-4984f053aabf.png)

ì—…ë¡œë“œ ë²„íŠ¼ì„ ëˆ„ë¥´ì ì˜ ì—…ë¡œë“œ ë˜ì—ˆë‹¤ê³  í•œë‹¤. ì´ì œ ì € ê²½ë¡œë¡œ ê°€ë³´ì!

![image](https://user-images.githubusercontent.com/53431568/125961217-90beab5b-b0a1-441f-a6bd-6b8706af8107.png)

ë‹¤ìŒê³¼ ê°™ì´ ì»¤ë§¨ë“œ ëª…ë ¹ì–´ ì…ë ¥ì°½ì´ ìˆì–´ ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/125961420-d2429785-581e-482e-9517-7195ec029da1.png)

```cat /etc/passwd```ë¡œ ì‹¤í—˜í•œ ê²°ê³¼ etc/passwd ë‚´ìš©ì´ ì¶œë ¥ëœë‹¤!

ì´ëŸ°ì‹ìœ¼ë¡œ ì‹œìŠ¤í…œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ë¥¼ **`ì›¹ì…€`**ì´ë¼ê³  í•œë‹¤.

![image](https://user-images.githubusercontent.com/53431568/125961523-ce7cbd11-5e7a-495d-8411-a07597b260bd.png)

<br>

### (2) Medium ë‹¨ê³„

ì•ì—ì„œ í•œ ê²ƒê³¼ ê°™ì€ ê³µê²©ì„ ì‹¤í–‰í•´ë³´ì•˜ë‹¤! ì´ë²ˆì—ëŠ” ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œê°€ ë˜ì§€ ì•Šì•˜ëŠ”ë° ê·¸ ì´ìœ ë¥¼ ì•Œê¸° ìœ„í•´ bursuiteë¥¼ í†µí•´ ìš”ì²­ì„ intercept í•´ì„œ ì‚´í´ë³´ì!

![image](https://user-images.githubusercontent.com/53431568/125961969-9236ff7e-efea-4016-8b22-dd267779f629.png)

`intercept -> on`ìœ¼ë¡œ ì„¤ì •í•œ í›„ ìš”ì²­ ë‚šì•„ì±„ê¸°!

![image](https://user-images.githubusercontent.com/53431568/125962620-4627fcbc-7fc6-412a-859f-a924069567f4.png)

ì´ ë¶€ë¶„ ë•Œë¬¸ì¸ê²ƒ ê°™ë‹¤! 

![image](https://user-images.githubusercontent.com/53431568/125962738-f322ddc8-8d4a-4034-8e98-745051981afa.png)

<br>

ê³µê²©ì´ ë˜ë‚˜ í™•ì¸í•˜ê¸° ìœ„í•´ í•œë²ˆ ì¡°ì‘í•´ì„œ ìš”ì²­ì„ ë‚ ë ¤ë´…ì‹œë‹¤. `application/x-php` -> `image/jpg`

![image](https://user-images.githubusercontent.com/53431568/125963076-15d182e1-d62c-4468-b1b3-fc35fef5c225.png)

ì˜ ì‹¤í–‰ì´ ë˜ì—ˆë‹¤. ë¯¸ë””ì—„ ë‹¨ê³„ì—ì„œëŠ” íŒŒì¼ ì—…ë¡œë“œ ê³µê²© ëŒ€ì‘ì„ ìœ„í•´ **`Content-Type ë§Œ í™•ì¸`**í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/125961217-90beab5b-b0a1-441f-a6bd-6b8706af8107.png)

<br>

### (3) High ë‹¨ê³„

high ë‹¨ê³„ì—ì„œëŠ” ì–´ë–»ê²Œ ëŒ€ì‘í•˜ëŠ”ì§€ ì†ŒìŠ¤ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ì

![image](https://user-images.githubusercontent.com/53431568/125964009-26907c7d-9c8f-4a17-896f-e0ed3b4fde57.png)


ì‹¤ì œ íŒŒì¼ë‚´ìš©ì˜ í™•ì¥ìë¥¼ í™•ì¸í•˜ê³ , getimagesize() ë¼ëŠ” í•¨ìˆ˜ë¥¼ í†µí•´ ì‹¤ì œë¡œ íŒŒì¼ì‚¬ì´ì¦ˆì¸ì§€ í™•ì¸í•˜ê³  ìˆë‹¤. ë¯¸ë””ì—„ ë‹¨ê³„ì—ì„œ í•œ ê²ƒ ì²˜ëŸ¼ interceptë¥¼ í•´ë³´ì. 

![ìº¡ì²˜](https://user-images.githubusercontent.com/53431568/125964342-3602b7e2-3fde-4d36-99b1-16bb5420f412.JPG)

ì´ë²ˆì—” ìˆ˜ì •í•  ë¶€ë¶„ì´ 2ê°€ì§€ê°€ ìˆë‹¤.
1. filenameì„ **`webshell.php` -> `webshell.php.jpg`**ë¡œ ë°”ê¾¼ë‹¤. 
2. `<?php` ê°€ ì‹œì‘í•˜ê¸° ì „ì¸ íŒŒì¼ ë‚´ìš© ì•ë¶€ë¶„ì— **`GIF89a`** ë¼ëŠ” ì½”ë“œë¥¼ ì…ë ¥í•œë‹¤. 

> ğŸ’¡ **`GIF89`** ëŠ” gif íŒŒì¼ì˜ í‘œì¤€ì— ì •ì˜ëœ ê°’ìœ¼ë¡œ íŒŒì¼ ë‚´ìš©ì•ì— ì…ë ¥ì„ í•˜ë©´ ì´ë¯¸ì§€ íŒŒì¼ì¸ ê²ƒ ì²˜ëŸ¼ ì†ì¼ ìˆ˜ ìˆë‹¤. 

![image](https://user-images.githubusercontent.com/53431568/125964595-e5ee45ff-425f-413c-a68e-199f2692b100.png)

ê³µê²© ì„±ê³µ!

![image](https://user-images.githubusercontent.com/53431568/125961217-90beab5b-b0a1-441f-a6bd-6b8706af8107.png)
