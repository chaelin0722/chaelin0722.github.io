---
title:  '1주차 웹 해킹- 실습 환경 구성 웹 보안'
excerpt: "week1"

categories:
  - study
  - etc
tags: [study, etc, virtualbox, kalilinux, hacking]

last_modified_at: 2021-06-25T08:06:00-05:00
classes: wide
---

### 8주간의 해킹 스터디 진행 시작!

막학기를 마치고 대학원 입학전에 알차게 방학을 보내고자 스터디를 신청하였다.

강의는 goormedu에서 제공하는 "화이트해커가 되기 위한 8가지 웹 해킹 기술"을 8주에 걸쳐 스터디를 진행한다 🙆‍♀️ 예에에!

![image](https://user-images.githubusercontent.com/53431568/123431851-b2a05f80-d604-11eb-97b8-efff905b1f02.png)

짧은 강의들로 구성되어있어서 듣기 부담이 없었다 ㅎㅎ 듣고 싶으면 여기로 gogo~! => [goormedu](https://edu.goorm.io/lecture/4953/화이트해커가-되기-위한-8가지-웹-해킹-기술)

<br>
<br>

## 해킹실습을 위한 환경구성 

### ⏹ VirtualBox 설치

![virtual](https://user-images.githubusercontent.com/53431568/123504242-f93c9b00-d692-11eb-876c-5719e480321f.jpg)

먼저, [VirtualBox](https://www.virtualbox.org/wiki/Downloads)사이트에 가면 최신 버전의 파일이 준비되어있다. 

1. platform packages 중에 자신의 운영체제에 맞게 다운을 받는다.
2. 다운받은 exe 파일을 실행하면 default값 그대로 유지하면서 next버튼을 누르고 최종적으로 install 하면 끝! 간단하다.
3. 그 다음엔  extension pack을 설치해준다. 설치하겠습니까? 라는 질문에 yes! 누르면 끝

이제 virtual box의 준비가 완료되었다.
<br>

### ⏹ 칼리리눅스 설치

칼리리눅스를 설치하기 위해서는 [kali 홈페이지](kali.org)에서 최신버전을 다운받으면 된다. 하지만 강사님의 추천으로 원활한 실습을 위해 [secuacademy](http://secuacademy.com/files/)에 올라온 kali 2019버전을 다운받았다. 

kali가 다운이 되었다면 ova 파일이 생긴것을 확인할 수 있다. 이것을 클릭해 사용할 수 있지만 앞서 설치한 virtual box에서 가상시스템을 가져오기에서 가져올 수 있다. 

1. 파일-> 가상시스템가져오기 클릭!

![12](https://user-images.githubusercontent.com/53431568/123504838-98af5d00-d696-11eb-8248-75b68a4e2545.jpg)

2. 파일버튼 클릭 -> kali-linux 클릭!

![11](https://user-images.githubusercontent.com/53431568/123504837-9816c680-d696-11eb-9f42-00bca83cba7f.jpg)

3. 다음을 누르고 가져오기를 누르면 다음과 같이 kali-linux가 생긴것을 확인할 수 있다.

![생성](https://user-images.githubusercontent.com/53431568/123504839-9a792080-d696-11eb-90c2-9ccd26d24a54.PNG)


외부인터넷과 사설망 인터넷 두개를 사용하기 때문에 어댑터를 추가해줄 것이다!

어댑터2로 가서 호스트 전용어댑터를 추가해준다.

![어댑ㅌ](https://user-images.githubusercontent.com/53431568/123505018-b204d900-d697-11eb-83b9-e8a1cdd79c09.PNG)

💡 이렇게 되면 **어댑터1의 NAT를 이용해 외부 인터넷을 사용**하게 되고 **어댑터2의 호스트 전용 어댑터**로 다른 가상머신들과 별도의 사설네트워크로 통신하게 되는 것이다!!

<br><br>

### 이제 칼리리눅스를 실행해보자!

시작버튼을 누르거나 더블클릭으로 실행하면된다. (username/password는 강의에서 강사님이 설명해주시므로 거기서 확인해보면 될 것 같다 ㅎㅎ)

1. kali 화면에서 터미널을 켜주고 (터미널 메뉴는 검정색 어플을 왼쪽 메뉴에서 찾을 수 있다) `ip addr`로 eth를 확인해준다.

eth0은 아까 설정에서 본 NAP 어댑터이고 eth1은 호스트 전용 어댑터이다.

eth0은 127.0.0.1 로 ip가 설정되어있지만 eth1은 그렇지 않은 것을 확인할 수 있다.

![image](https://user-images.githubusercontent.com/53431568/123505789-090cad00-d69c-11eb-8b9f-15fd766825bc.png)

2. 네트워크 설정을 위해 편집기를 실행해 파일을 하나 추가해줄 것이다.

![leopard](https://user-images.githubusercontent.com/53431568/123506024-ffd01000-d69c-11eb-94f3-76df3385b0a2.PNG)

위 이미지의 마지막 초록색 어플이 `leafpad`라는 파일편집기 이다. 이 편집기를 열고 상단 메뉴의 File -> Open을 클릭해준다. 

![image](https://user-images.githubusercontent.com/53431568/123506068-49205f80-d69d-11eb-8463-a5029290da37.png)

다음으로 FileSystem -> etc/network/interfaces 파일을 수정해준다. 아래와 같이 파일의 맨 밑부분에 4줄을 추가해준다. 

![eth](https://user-images.githubusercontent.com/53431568/123505875-6143af00-d69c-11eb-9c91-bcdb39025213.PNG)

3. 위의 파일을 저장 후 ```systemctl restart networking``` 이라는 명령어로 재시작을 해준다. 다시 ```ip addr```로 확인하면 각 eth에 ip주소가 할당된 것을 확인할 수 있다. 웹브라우저를 열면 웹브라우저를 사용할 수 있는 것으로 확인할 수 있다. 

4. 다음으로는 스냅샷 만들기!

스냅샷이라는 것은 복원지점을 만드는 것인데, 만약 kali를 쓰다가 무슨 오류가 난다면 스냅샷에 설정해둔 지점으로 복원할 수 있다. 매우 유용하므로 중간중간 만들예정이다 ㅎㅎ

virtual box 프로그램으로 들어가서 kali-linux 메뉴 오른쪽 부분을 클릭하면 스냅샷이 보인다.

![스크린샷(8)](https://user-images.githubusercontent.com/53431568/123506224-15920500-d69e-11eb-9622-98394472f055.png)

현재 kali linux 설정을 완료했으므로 스냅샷 하나를 설정해 주기로 했다. 

![스냅샷](https://user-images.githubusercontent.com/53431568/123506120-969ccc80-d69d-11eb-84a2-f38c193ede88.PNG)

후에 복원버튼을 누르면 다시 초창기 설정 부분으로 돌아올 수 있을 것이다.

![완료](https://user-images.githubusercontent.com/53431568/123506227-162a9b80-d69e-11eb-9045-6e2b34c5a00b.png)


### XAMPP 설치

### DVWA 설치 및 설정


<br><br>

이제 본격적으로 공부를 시작해 봅시다 ㅎㅎ👩🏻‍💻

## 화이트 해커란?!

광범위하게는 모든 정보보안 관련 전문가를 칭하며 구체적으로는 **"실제 해킹 기술을 보유하고 있는 보안전문가"** 를 뜻한다.

그렇다면 화이트 해커가 불법해킹과의 차이는? `사전 허가 여부`이다. 

화이트해커의 역할이 공격자와 동일한 관점에서 해킹을 수행하기 때문에 기술적 부분에서는 차이가 없다. 

따라서 반드시 허가를 받은 후에 해킹을 해야한다!!

강사님이 환경을 구성하고 실습하기 유용한 사이트로 [exploit-db.com](exploit-db.com)을 언급하셨는데 이 사이트는 공개된 exploit이 있으며 칼리리눅스의 
메인 스폰서인 offensive security에서 관리하고 있는 데이터 베이스로 많은 exploits가 공개되어 있다고 한다.

## 보안취약점과 해킹

### 보안취약점

- 정보보안의 3요소 중 최소 한가지 영향을 미치는 소프트웨어 버그
- 정보보안의 3요소
    - 기밀성
    - 무결성
    - 가용성
- 해킹은 보안취약점을 공격하는 것

`웹 해킹 역시 웹 보안취약점을 공격해 이루어집니다`

### 해킹의 기초단계

![image](https://user-images.githubusercontent.com/53431568/123429541-05c4e300-d602-11eb-91fd-c28666d4676a.png)

예시를 들며 설명하면 프로세스는 다음과 같이 설명할 수 있다!

1. 정찰 - 구글에 대한 각종 정보 수집, 웹 서버 등 외부에서 접근가능한 ip주소가 무엇인지를 알아낸다.
2. 스캐닝 및 취약점 분석 - 서버의 운영체제가 무엇인지, 프로그램의 버전이 무엇인지를 알고 어떤 취약점이 있는지 알아낸다.
3. 공격(익스플로잇) - 어떤 사용자의 비번을 알아내거나 취약점을 알아내면 실제로 침투를 실행한다.
4. 권한상승 - 침투 후 관리자 권한을 획득하는 단계이다.
5. 백도어 관리 - 언제든지 해당 시스템에 접속할 수 있도록 사용자를 추가해 두거나 백도어를 설치해 관리하는 것이다. 
6. 흔적 지우기 - 해킹의 흔적을 지워 해킹을 당한것을 모르게 하며 추적당하지 않도록 한다. 

> 위의 프로세스는 한가지 시스템에 대한 것이며, 만약 내부의 또 다른 네트워크나 시스템이 여러개가 있다면 시스템 해킹에서 얻은 정보로 또 다시 다른 해킹을 진행할 수 있다. 

## 웹 보안의 중요성

### 버그바운티 제도

보안 취약점을 발견해 보고하면 보상해주는 제도로 구글, 페이스북 마이크로소프트가 운영 하고있다.

발견한 보안이 심각한 것일 수록 보상금액이 높아진다고 한다.💲💲

최근엔 버그바운티를 전문으로 하고있는 웹사이트도 등장한다고 한다.

[bugcrowd] 라는 회사로 버그바운티 제도를 운영하기 어려운 다른 웹사이트를 위한 사이트로 점점 시장이 커지는 추세이다.

![image](https://user-images.githubusercontent.com/53431568/123430861-9e0f9780-d603-11eb-8141-2533fc610d56.png)

최근엔 버그헌터라는 프리랜서 직업도 생긴다니 웹 해킹기술을 공부하면 이런 분야로 일하는 것도 재밌을 것 같다.


## 웹 아키텍쳐

웹은 크게 클라이언트 영역과 서버영역으로 나뉜다.

![image](https://user-images.githubusercontent.com/53431568/123435644-bc2bc680-d608-11eb-9bce-0987a16fc603.png)

(1) 클라이언트 영역에서는 웹브라우저를 이용해 웹에 접속하고 http로 인터넷을 통해 서버영역에 접속한다.

(2) 서버영역은 로직티어와 데이터 티어로 이루어져 있다. 
> 로직티어는 웹사이트의 각종 메뉴들을 서비스하고 클라이언트에서 전송된 http를 처리한다.
> 데이터티어는 데이터베이스를 말하며 로직티어의 요청에 따라 데이터를 주고, 로직티어는 받은 데이터를 가공해 최종적으로 다시 클라이언트에 전송한다.

### HTTP

- Hyper Text Transfor Protocol
- 주로 80번 포트를 이용해 서비스
- HTTP요청과 HTTP 응답으로 이루어짐
- 클라이언트가 요청, 서버가 응답
- HTTP 메소두: GET, POST, PUT, DELETE 등
- 응답코드(status code)

### HTTP 응답코드

100번대 ~500번대 까지 있다. 에러메세지와 함께 전달되는 코드이며 각 번대 별 에러의 의미는 다음과 같다.

- 1XX : 정보전달
- 2XX : 성공
- 3XX : 리다이렉션
- 4XX : 클라이언트 에러
- 5XX : 서버에러

### 세션유지와 쿠키
- HTTP는 stateless이기 때문에 세션 ID를 이용해 이전 상태를 유지한다. 예를 들면 한번 로그인하면 다른 페이지로 이동해도 다시 로그인을 하지 않아도 되는것과 같다.
- 세션ID는 보통 쿠키로 전달한다.

 **"쿠키"** 🍪란?
      - 변수 = 값 의 집합
      - 서버는 Set-Cookie헤더를 이용해 쿠키를 전달하고 브라우저에서 이를 저장해 두었다가 cookie헤더에 전송한다.
- 세션ID를 탈취함으로 세션 하이재킹 공격이 가능하다. (따라서 세션ID는 잘 보호해 주어야 한다.😮)


## HTTP 프록시와 버프스위트

### HTTP 프록시
일반적으로 우리가 웹에 접속하는 모습은 다음과 같다.

![image](https://user-images.githubusercontent.com/53431568/123437018-301a9e80-d60a-11eb-8481-def7bf8ed175.png)

하지만 중간에 HTTP 프록시를 이용하면 HTTP요청과 응답을 중간에서 가로챌 수 있게 된다. 즉, 메세지의 내용을 보거나 수정해서 보내는 것이 가능하다. 웹 해킹이나 웹 보안점을 찾을때 매우 유용하다. 

![image](https://user-images.githubusercontent.com/53431568/123437067-3dd02400-d60a-11eb-84ec-211d8f64ef63.png)

HTTP 프록시 프로그램중 대표적인것으로 `"버프스위트"`가 있다.

### 버프스위트(Burp Suite)
